<div class="page-container">
  
  <div class="form-panel-centered">
    <div class="form-content">
      <div class="logo-header">
        <img src="assets/imagenes/Logo.jpg" alt="Logo" class="logo-img">
        <h1 class="title">WorkLink</h1>
      </div>

      <h3 class="subtitle">Recuperar Contraseña</h3>

      <form class="login-form" #recoverForm="ngForm">

        <div *ngIf="alertMessage" 
             class="alert-message" 
             [class.success]="alertType === 'success'"
             [class.danger]="alertType === 'danger'"
             [class.info]="alertType === 'info'"
             [innerHTML]="alertMessage"> </div>

        <div class="form-group">
          <label for="email" class="form-label">Correo electrónico</label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            class="form-input" 
            placeholder="Ingresa tu correo"
            [(ngModel)]="email"
            [disabled]="emailDisabled"
            required
            email
            #emailModel="ngModel">
          <div *ngIf="emailModel.invalid && emailModel.touched" class="error-text">
            Por favor ingresa un correo válido.
          </div>
        </div>

        <button 
          type="button" 
          (click)="onSendCode()"
          class="submit-button"
          [disabled]="isSendingCode || emailModel.invalid || emailDisabled">
          <span *ngIf="isSendingCode" class="spinner"></span>
          {{ isSendingCode ? 'Enviando...' : (emailDisabled ? 'Código Enviado' : 'Enviar código') }}
        </button>

        <div *ngIf="otpSectionVisible" class="otp-section">
          <div class="form-group">
            <label for="otp" class="form-label">Código OTP</label>
            <input 
              type="text" 
              id="otp" 
              name="otp" 
              class="form-input" 
              placeholder="Ingresa el código de 6 dígitos" 
              maxlength="6"
              pattern="[0-9]{6}"
              [(ngModel)]="otp"
              required
              #otpModel="ngModel">
            <div class="info-text">
              El código expirará en 10 minutos.
            </div>
            <div *ngIf="otpModel.invalid && otpModel.touched" class="error-text">
              El código debe tener 6 dígitos.
            </div>
          </div>

          <button 
            type="button" 
            (click)="onValidateOtp()"
            class="submit-button button-success" 
            [disabled]="isVerifyingOtp || otpModel.invalid">
            <span *ngIf="isVerifyingOtp" class="spinner"></span>
            {{ isVerifyingOtp ? 'Verificando...' : 'Validar OTP' }}
          </button>
        </div>

      </form>

      <p class="signup-link">
        ¿Recordaste tu contraseña? 
        <a routerLink="/login">Iniciar Sesión</a>
      </p>
    </div>
  </div>

</div>